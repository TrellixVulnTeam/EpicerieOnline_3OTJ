{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/logger.service\";\nimport * as i2 from \"../../../services/order.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../notification/notification.component\";\nimport * as i5 from \"@angular/forms\";\n\nfunction OrdersListComponent_app_notification_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-notification\", 12);\n    i0.ɵɵelementStart(1, \"span\", 13);\n    i0.ɵɵtext(2, \" Un confirmation a \\u00E9t\\u00E9 envoy\\u00E9 \\u00E0 l'utilisateur.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdersListComponent_app_notification_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-notification\", 14);\n    i0.ɵɵelementStart(1, \"span\", 13);\n    i0.ɵɵtext(2, \"La commande a \\u00E9t\\u00E9 supprim\\u00E9e.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdersListComponent_app_notification_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-notification\", 14);\n    i0.ɵɵelementStart(1, \"span\", 13);\n    i0.ɵɵtext(2, \"Vous devez \\u00EAtre un administrateur pour effectuer cette op\\u00E9ration.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdersListComponent_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 15);\n    i0.ɵɵelementStart(2, \"i\", 16);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_tr_24_Template_i_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const o_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.delete(o_r5);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"p\", 17);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 18);\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 18);\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 18);\n    i0.ɵɵelementStart(15, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function OrdersListComponent_tr_24_Template_input_ngModelChange_15_listener($event) {\n      const o_r5 = ctx.$implicit;\n      return o_r5.isValidate = $event;\n    })(\"click\", function OrdersListComponent_tr_24_Template_input_click_15_listener($event) {\n      return $event.preventDefault();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\", 18);\n    i0.ɵɵelementStart(17, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function OrdersListComponent_tr_24_Template_input_ngModelChange_17_listener($event) {\n      const o_r5 = ctx.$implicit;\n      return o_r5.isCompleted = $event;\n    })(\"click\", function OrdersListComponent_tr_24_Template_input_click_17_listener($event) {\n      return $event.preventDefault();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\", 20);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_tr_24_Template_td_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const o_r5 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.showModal(o_r5);\n    });\n    i0.ɵɵelement(19, \"i\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const o_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(o_r5.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", o_r5.customer.id, \" - \", o_r5.name, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(o_r5.date);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(o_r5.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", o_r5.isValidate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", o_r5.isCompleted);\n  }\n}\n\nfunction OrdersListComponent_li_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const p_r13 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", p_r13.title, \" x\", p_r13.quantity, \"\");\n  }\n}\n\nexport let OrdersListComponent = /*#__PURE__*/(() => {\n  class OrdersListComponent {\n    constructor(logger, orderService) {\n      this.logger = logger;\n      this.orderService = orderService;\n      this.notificationValide = false;\n      this.notificationDelete = false;\n      this.notificationAdminError = false;\n      this.orders = [];\n      this.orderUpdate = {\n        id: 0,\n        customerId: 0,\n        name: '',\n        address: '',\n        priceTotal: 0,\n        isCompleted: false,\n        isValidate: false,\n        products: []\n      };\n      this.orderDetails = {\n        id: 0,\n        customer: {\n          id: 0,\n          roleId: 0,\n          email: '',\n          password: ''\n        },\n        date: '',\n        isCompleted: false,\n        isValidate: false,\n        name: '',\n        address: '',\n        priceTotal: 0,\n        products: []\n      }; //Show Modal\n\n      this.showmodal = false;\n      orderService.getOrders().subscribe(res => {\n        this.orders = res;\n        console.log(\"this.log\", this.orders);\n      });\n    }\n\n    ngOnInit() {} //Sleep function for sidebars\n\n\n    sleep(time) {\n      return new Promise(resolve => setTimeout(resolve, time));\n    }\n\n    showModal(o) {\n      console.log(\"o\", o);\n      this.orderDetails = o;\n      this.showmodal = !this.showmodal;\n    } //Change 'Est Valider' to true\n\n\n    valide() {\n      //Check if admin\n      if (!this.logger.isAdmin()) {\n        //Notification error\n        this.notificationAdminError = true;\n        this.sleep(2500).then(() => {\n          this.notificationAdminError = false;\n        });\n        return;\n      }\n\n      if (this.orderDetails.id > 0) {\n        this.orderDetails.isValidate = true;\n        this.orderUpdate.id = this.orderDetails.id;\n        this.orderUpdate.customerId = this.orderDetails.customer.id;\n        this.orderUpdate.name = this.orderDetails.name;\n        this.orderUpdate.address = this.orderDetails.address;\n        this.orderUpdate.priceTotal = this.orderDetails.priceTotal;\n        this.orderUpdate.isValidate = this.orderDetails.isValidate;\n        this.orderUpdate.isCompleted = this.orderDetails.isCompleted;\n        this.orderUpdate.products = this.orderDetails.products;\n        this.orderService.updateOrder(this.orderUpdate).subscribe(res => {\n          //Notification when order register to database ok\n          this.notificationValide = true;\n          this.sleep(3500).then(() => {\n            this.notificationValide = false;\n          });\n          this.showmodal = false;\n        });\n      }\n    } //Delete order\n\n\n    delete(order) {\n      //Check if admin\n      if (!this.logger.isAdmin()) {\n        //Notification error\n        this.notificationAdminError = true;\n        this.sleep(2500).then(() => {\n          this.notificationAdminError = false;\n        });\n        return;\n      }\n\n      this.orderService.deleteOrder(order.id).subscribe(res => {\n        this.orderService.getOrders().subscribe(orders => {\n          this.orders = orders; //Notification when order register to database ok\n\n          this.notificationDelete = true;\n          this.sleep(3500).then(() => {\n            this.notificationDelete = false;\n          });\n        });\n        console.log(\"res\", res);\n      });\n    }\n\n  }\n\n  OrdersListComponent.ɵfac = function OrdersListComponent_Factory(t) {\n    return new (t || OrdersListComponent)(i0.ɵɵdirectiveInject(i1.LoggerService), i0.ɵɵdirectiveInject(i2.OrderService));\n  };\n\n  OrdersListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrdersListComponent,\n    selectors: [[\"app-orders-list\"]],\n    decls: 36,\n    vars: 7,\n    consts: [[\"class\", \"theme-green\", 4, \"ngIf\"], [\"class\", \"theme-red\", 4, \"ngIf\"], [\"action\", \"\", 1, \"search-box-container\", \"search-prd\"], [1, \"admin-title\"], [1, \"tbl\"], [2, \"width\", \"5%\"], [2, \"width\", \"12%\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"myModal\", 1, \"modal\"], [1, \"modal-content\"], [1, \"close\", 3, \"click\"], [1, \"btn\", 3, \"click\"], [1, \"theme-green\"], [1, \"msg-text-add\"], [1, \"theme-red\"], [1, \"td-img\"], [1, \"fas\", \"fa-trash-alt\", 3, \"click\"], [1, \"td-title\"], [1, \"td-price\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [1, \"td-price\", 3, \"click\"], [1, \"fas\", \"fa-eye\", 2, \"font-size\", \"1.5rem\"]],\n    template: function OrdersListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OrdersListComponent_app_notification_0_Template, 3, 0, \"app-notification\", 0);\n        i0.ɵɵtemplate(1, OrdersListComponent_app_notification_1_Template, 3, 0, \"app-notification\", 1);\n        i0.ɵɵtemplate(2, OrdersListComponent_app_notification_2_Template, 3, 0, \"app-notification\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"span\", 3);\n        i0.ɵɵtext(5, \"Liste de orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"table\", 4);\n        i0.ɵɵelementStart(7, \"thead\");\n        i0.ɵɵelementStart(8, \"tr\");\n        i0.ɵɵelementStart(9, \"th\", 5);\n        i0.ɵɵtext(10, \"ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\", 6);\n        i0.ɵɵtext(12, \"CustomerId + Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\");\n        i0.ɵɵtext(14, \"Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"th\");\n        i0.ɵɵtext(16, \"Adresse\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\", 5);\n        i0.ɵɵtext(18, \"Est Valider\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\", 5);\n        i0.ɵɵtext(20, \"Est Termin\\u00E9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\", 5);\n        i0.ɵɵtext(22, \"Voir\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"tbody\");\n        i0.ɵɵtemplate(24, OrdersListComponent_tr_24_Template, 20, 7, \"tr\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 8);\n        i0.ɵɵelementStart(26, \"div\", 9);\n        i0.ɵɵelementStart(27, \"span\", 10);\n        i0.ɵɵlistener(\"click\", function OrdersListComponent_Template_span_click_27_listener() {\n          return ctx.showmodal = !ctx.showmodal;\n        });\n        i0.ɵɵtext(28, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"h3\");\n        i0.ɵɵtext(30, \"Liste des produits command\\u00E9s\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ul\");\n        i0.ɵɵtemplate(32, OrdersListComponent_li_32_Template, 3, 2, \"li\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"br\");\n        i0.ɵɵelementStart(34, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function OrdersListComponent_Template_button_click_34_listener() {\n          return ctx.valide();\n        });\n        i0.ɵɵtext(35, \"Valid\\u00E9 la commande \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.notificationValide);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.notificationDelete);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.notificationAdminError);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"show-modal\", ctx.showmodal);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orderDetails.products);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i4.NotificationComponent, i5.CheckboxControlValueAccessor, i5.NgControlStatus, i5.NgModel],\n    styles: [\".search-box-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 0}.tbl[_ngcontent-%COMP%]{width:100%;margin:auto}.tbl[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#0271dc;color:#fff;height:4rem;font-size:2rem}.tbl[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%}tbody[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover, tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff}td[_ngcontent-%COMP%]{border-bottom:1px solid grey;position:relative}td[_ngcontent-%COMP%]   .fa-trash-alt[_ngcontent-%COMP%]{position:absolute;left:0;padding:.5rem;color:red;font-size:1rem}td[_ngcontent-%COMP%]   .fa-eye[_ngcontent-%COMP%]:hover, td[_ngcontent-%COMP%]   .fa-trash-alt[_ngcontent-%COMP%]:hover{cursor:pointer}.td-btn[_ngcontent-%COMP%], .td-img[_ngcontent-%COMP%], .td-price[_ngcontent-%COMP%]{text-align:center}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:75px;width:auto}.td-title[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2rem}.td-description[_ngcontent-%COMP%]{font-size:1.5rem!important;color:grey}.btn-delete[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%]{padding:1rem;margin:2px;border-radius:3px;border:none;color:#fff;font-size:2rem;width:6rem}.btn-delete[_ngcontent-%COMP%]:hover, .btn-edit[_ngcontent-%COMP%]:hover{cursor:pointer}.btn-edit[_ngcontent-%COMP%]{background-color:#72a73b}.btn-delete[_ngcontent-%COMP%]{background-color:#e95e5d}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#5a8a25}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#e04746}@media (max-width:768px){#cat[_ngcontent-%COMP%], .admin-title[_ngcontent-%COMP%]{display:none}#category[_ngcontent-%COMP%]{width:100%}.btn-delete[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%]{width:8rem}}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:99999999999999;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006}.modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:3rem;border:1px solid #888;width:50%;height:auto}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem}.modal-content[_ngcontent-%COMP%]{font-size:2rem}.close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700}.close[_ngcontent-%COMP%]:focus, .close[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer}.show-modal[_ngcontent-%COMP%]{display:block}\"]\n  });\n  return OrdersListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
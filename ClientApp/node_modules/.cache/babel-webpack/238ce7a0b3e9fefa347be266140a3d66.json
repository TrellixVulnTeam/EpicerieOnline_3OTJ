{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport let PanierService = /*#__PURE__*/(() => {\n  class PanierService {\n    constructor() {\n      this.$panier = new EventEmitter();\n      this.panierInfo = {\n        products: [],\n        totalPrice: 0,\n        nbProducts: 0\n      };\n    }\n\n    addProductLocalStorage(p, quantity) {\n      for (let i = 0; i < quantity; i++) {\n        this.panierInfo.products.push(p);\n        this.panierInfo.totalPrice += p.price;\n      }\n\n      if (quantity > 1) this.panierInfo.nbProducts = +this.panierInfo.nbProducts + +quantity;else this.panierInfo.nbProducts++;\n      this.$panier.emit(this.panierInfo);\n      localStorage.setItem('panier', JSON.stringify(this.panierInfo));\n    }\n\n    getProductsLocalStorage() {\n      if (localStorage.getItem(\"panier\") !== null) {\n        let panierJSON = JSON.parse(localStorage.getItem('panier'));\n        this.panierInfo = panierJSON;\n        return this.panierInfo;\n      }\n\n      return {\n        products: [],\n        totalPrice: 0,\n        nbProducts: 0\n      };\n    }\n\n    deleteProductLocalStorage(id, price) {\n      let panierJSON = JSON.parse(localStorage.getItem('panier'));\n      let products = panierJSON.products;\n      panierJSON.nbProducts--;\n      if (panierJSON.nbProducts > 0) panierJSON.totalPrice -= price;else panierJSON.totalPrice = 0;\n      this.panierInfo.nbProducts--;\n      if (this.panierInfo.nbProducts > 0) this.panierInfo.totalPrice -= price;else this.panierInfo.totalPrice = 0;\n      let index = products.map(x => {\n        return x.id;\n      }).indexOf(id);\n      products.splice(index, 1);\n      this.panierInfo.products.splice(index, 1);\n      panierJSON.products = products;\n      localStorage.setItem('panier', JSON.stringify(panierJSON));\n      this.$panier.emit(this.panierInfo);\n    }\n\n  }\n\n  PanierService.ɵfac = function PanierService_Factory(t) {\n    return new (t || PanierService)();\n  };\n\n  PanierService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PanierService,\n    factory: PanierService.ɵfac,\n    providedIn: 'root'\n  });\n  return PanierService;\n})();","map":null,"metadata":{},"sourceType":"module"}
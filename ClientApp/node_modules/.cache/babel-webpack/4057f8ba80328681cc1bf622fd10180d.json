{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport let FavoritesService = /*#__PURE__*/(() => {\n  class FavoritesService {\n    constructor() {\n      this.$favorites = new EventEmitter();\n      this.favorites = {\n        favorites: [],\n        nbFavorites: 0\n      };\n    }\n\n    addFavoritesLocalStorage(id) {\n      this.favorites.nbFavorites++;\n      this.favorites.favorites.push(id);\n      this.$favorites.emit(this.favorites);\n      localStorage.setItem('favorites', JSON.stringify(this.favorites));\n    }\n\n    getFavoritesLocalStorage() {\n      if (localStorage.getItem(\"favorites\")) {\n        let favoritesJSON = JSON.parse(localStorage.getItem('favorites')) ? JSON.parse(localStorage.getItem('favorites')) : '';\n        this.favorites = favoritesJSON;\n        return this.favorites;\n      }\n\n      return {\n        favorites: [],\n        nbFavorites: 0\n      };\n    }\n\n    deleteFavoritesLocalStorage(id) {\n      let favoritesJSON = JSON.parse(localStorage.getItem('favorites'));\n      let favorites = favoritesJSON.favorites; //favorites from local storage\n\n      favoritesJSON.nbFavorites--; //favorites EventEmitter\n\n      this.favorites.nbFavorites--;\n      let index = favorites.indexOf(id);\n      favorites.splice(index, 1);\n      this.favorites.favorites.splice(index, 1);\n      favoritesJSON.favorites = favorites;\n      localStorage.setItem('favorites', JSON.stringify(favoritesJSON));\n      this.$favorites.emit(this.favorites);\n    }\n\n  }\n\n  FavoritesService.ɵfac = function FavoritesService_Factory(t) {\n    return new (t || FavoritesService)();\n  };\n\n  FavoritesService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: FavoritesService,\n    factory: FavoritesService.ɵfac,\n    providedIn: 'root'\n  });\n  return FavoritesService;\n})();","map":null,"metadata":{},"sourceType":"module"}